var apiLogoutApp=angular.module("nab.ib.nabapi.logout",["nab.ib.nabapi.authentication","nab.ib.nabapi.config","nab.ib.nabapi.logout.config"]);apiLogoutApp.service("apiLogoutService",["$q","$http","nabApiConfig","apiLogoutUrl",function(c,d,b,a){this.callApiLogoutService=function(){var e=c.defer();var f=e.promise;if($.cookie("nabibSessionToken")!==undefined){var g=b.domain+a;f=d({url:g,method:"DELETE",cache:false})}else{e.resolve("API logout not required")}return f};this.removeApiTokenCookie=function(){$.removeCookie("nabibSessionToken");$.removeCookie("nabibSessionToken",{path:"/nabib/mobile"})};this.redirect=function(){if($("#encryptedDataForm").length>0){$("#encryptedDataForm").get(0).submit()}else{window.close()}}}]);apiLogoutApp.controller("apiLogoutController",["$q","$scope","$http","nabApiConfig","apiLogoutUrl","apiLogoutService",function(e,d,f,c,b,a){d.apiLogoutWhenIBLogout=function(){a.callApiLogoutService().then(a.removeApiTokenCookie,a.removeApiTokenCookie).then(a.redirect)};d.apiLogoutWhenIBLogin=function(){a.callApiLogoutService().then(a.removeApiTokenCookie,a.removeApiTokenCookie)}}]);